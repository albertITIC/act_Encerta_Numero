<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">

    <title>FIND NUMBER</title>
</head>
<body>

    <header class="header"> 
        <div class="titol">
            <h1 clas> Busca un n√∫mero entre 1 i 20 </h1>
        </div>

        <div class="boto-reiniciar">
            <button onclick="reiniciaPartida()"> Reinicia! </button>
        </div>
        <br>
    </header>

    <!-- He fet un div per poder guardar el main i el footer per canviar m√©s endavant les seves propietats (p.e el fons de pantalla)-->
    <main class="main" id="info-main">
        <h2> Busca el n√∫mero !</h2>
        <h3 id="resultat"> ? </h3>
        <h3 id="text-inici"> Comencem la partida... </h3> <!--He de canviar el text per quan encerti el n√∫mero-->
    </main> 
        
    
    <footer class="footer" id="info-footer">
        <div class="footer-primeraPart">
            <input id="num" type="number"> <!-- cap√ßalera del input -->
            <button onclick="jugada()">Prova!</button> <!--Bot√≥-->
            </div>
    
            <div class="footer-segonaPart">
                <p>üíØ Jugades: <span id="numComptador">20</span> </p> 
                <p>ü•á Total punts: <span id="totalPunts">0</span></p>
            </div>  
    </footer>

    <!--Per fer events de la web = Funcions  -->
    <script>
        //CONSTANTS DEL JOC
        const NUM_JUGADES = 20; //Variable global, sempre ser√† 20.

        //Variables del joc que s'anir√† decrementant (inicialment sempre tenim 20)
        let numJugades = NUM_JUGADES; //variable global (sempre ser√† 20 jugades)

        //Punts inicials, no canvia = variable constant
        const TOTAL_PUNTS = 0;
        let totalPunts = TOTAL_PUNTS;


        //Declarem la funci√≥ al event - ES SOL UN EXEMPLE NO FEM SERVIR ALERTS function mostraHelloWorld(){alert("Hello world");}
        function reiniciaPartida(){
            //L'input li assignar√© un espai en blanc per quan reinici.
            let num = document.getElementById("num");
            num.value="";

            //RESTABLIR LES DADES DEL JOC. 
            //Aquestes s√≥n el N√∫mero de jugades/intents, el n√∫mero total de punts, color de fons de pantalla, text...
            //Primer reinicio el n√∫mero de jugades
            numJugades = NUM_JUGADES;
            
            //Agafo el contador d'intents i el restablim al n√∫mero total de jugades
            document.getElementById("numComptador").textContent = numJugades;

            //Reiniciar els punts
            document.getElementById("totalPunts").textContent = totalPunts;

            //Reiniciar√© els valors de la pantalla/ info (ja sigui si perqu√® hagi guanyat/ perdut o si decideix reiniciar per compte pr√≤pia)
            //Reinicia el text que dona la informaci√≥ del n√∫mero secret
            document.getElementById("resultat").textContent = "?";

            //Un cop reinici actualitzar√© el text que apareix per pantalla, per el text inicial.
            document.getElementById("text-inici").textContent = "Comencem partida...";

            //Canviar el color de fons del main i del footer per negre (color inicial)
            document.getElementById("info-main").style.backgroundColor="Black";
            document.getElementById("info-footer").style.backgroundColor="Black";

            //Reiniciar els punts
            document.getElementById("totalPunts").textContent = 0;
            totalPunts = 0;

            //Generar un nou n√∫mero aleatori
            document.getElementById("totalPunts").textContent = 0;
        }
        
        function jugada(){
            //Agafo l'ID del n√∫mero que introdueixi l'usuari per l'input.
            let num = document.getElementById("num").value; //he de posar un .value, si no fa referencia al objecte 
            
            if(num){ //Condicional de si l'ID reb un valor
                numJugades -= 1; //= numJugades -1 o --numJugades
                document.getElementById("numComptador").textContent = numJugades; //Agafem l'ID del contador==20 i per cada intent s'anir√† restant.

                //If que comprova que el n√∫mero de jugades suficients per seguir jugant (no pot ser inferior a 0)
                if(numJugades>0){
                    //Si l'encerta
                        if(num == numSecretEnter){
                        document.getElementById("resultat").textContent =  numSecretEnter; //Canvio el "?" per el n√∫mero secret
                        //Crear variable per poder canviar la info del main    
                        document.getElementById("info-main").style.backgroundColor ="Green";
                        //Text del text
                        document.getElementById("text-inici").textContent = "N√∫mero correcte!";
                        //El footer tamb√© canviar√† de color
                        document.getElementById("info-footer").style.backgroundColor ="Green";

                        let puntsGuanyats = numJugades;
                        totalPunts += puntsGuanyats; // Afegim punts guanyats als punts totals
                        document.getElementById("totalPunts").textContent = totalPunts;


                    } else if (num > numSecretEnter){
                        //Text que donar√† info del n√∫mero introdu√Øt
                        document.getElementById("resultat").textContent = "El n√∫mero introdu√Øt √©s massa gran!";
                        //Seguir√© amb el color de fons de pantalla predeterminat
                        document.getElementById("info-main").style.backgroundColor = "Black";
                        //Text del text
                        document.getElementById("text-inici").textContent = "N√∫mero incorrecte!";

                        document.getElementById("info-footer").style.backgroundColor = "Black";

                    } else if(num < numSecretEnter){
                        //Text que informar√† al usuari que √©s massa petit
                        document.getElementById("resultat").textContent = "El n√∫mero introdui√Øt √©s massa petit!";
                        document.getElementById("info-main").style.backgroundColor = "Black";
                        //Text del text
                        document.getElementById("text-inici").textContent = "N√∫mero incorrecte!";

                        document.getElementById("info-footer").style.backgroundColor = "Black";
                    }
                } else{ //En cas contrari notificar√© al usuari que NO ha introdu√Øt cap valor al input.
                    //He de dir al usuari que no disposa de m√©s oportunitats (n√∫mero de jugades)
                    //Modifico el text i color de fons, haur√† perdut.
                    document.getElementById("resultat").textContent = numSecretEnter;
                    document.getElementById("text-inici").textContent = "Final de la partida";
                    document.getElementById("info-main").style.backgroundColor = "Red";
                    document.getElementById("info-footer").style.backgroundColor = "Red";

                }
            } else{
                //Si no detecta cap valor avisem al usuari.
                alert("No has introdu√Øt cap valor");
            }
            //console.log("N√∫mero de jugades restants: " + numJugades, typeof numJugades); 
            let number = Number(num); //un input sense valor es sempre un String
            // console.log(num); //num que introdueixo

        }
        //Per crear el n√∫mero secret del noste joc
        const MAX_NUM = 20; //N√∫mero m√†xim que podem obtenir
        const MIN_NUM = 1;  //N√∫mero m√≠nim que podem obtenir

        let numSec = Math.random() * (MAX_NUM+1); //alternativa ==> let numSec = Math.random()*20;
        let numSecretEnter = Math.floor(numSec) + MIN_NUM;
        console.log("N√∫mero secret: " + numSecretEnter);


    </script>       
</body>
</html>